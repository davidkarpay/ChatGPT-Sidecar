# ====================================================
# Railway Production Configuration
# ====================================================

# Security / Authentication (REQUIRED)
READ_KEY=your-read-only-key-here      # Can search, view documents, chat
ADMIN_KEY=your-admin-key-here         # Can ingest, reindex, manage system
SUPER_KEY=your-super-admin-key-here   # Can manage users, keys, system config
CORS_ORIGINS=https://your.domain      # Comma-separated list; avoid *

# Data Storage Paths (Railway Volume Mounts)
DATA_ROOT=/data
SQLITE_DB=/data/sidecar.db
FAISS_INDEX_DIR=/data/indexes
EMBED_CACHE_DIR=/data/.cache

# Embeddings Configuration
EMBED_MODEL=sentence-transformers/all-MiniLM-L6-v2
EMBED_DEVICE=cpu                      # Railway containers use CPU
 
# LLM Provider Configuration (plug-and-play)
LLM_PROVIDER=none                     # openai, anthropic, ollama, none
LLM_MODEL=                           # e.g., gpt-4o-mini, claude-3-haiku, llama3:8b
OPENAI_API_KEY=
ANTHROPIC_API_KEY=
OLLAMA_HOST=                         # e.g., http://localhost:11434

# Security Configuration (PRODUCTION HARDENING)
INGEST_ALLOW_ARBITRARY_FS=false      # Restrict paths to ALLOWED_DATA_ROOT
ALLOWED_DATA_ROOT=/data/imports      # Only allow ingestion from this directory
DISABLE_ADMIN_ENDPOINTS=false       # Set true for read-only deployment

# Background Tasks (optional)
REDIS_URL=                           # Redis for Celery if running worker service
SYNC_INTERVAL_HOURS=24               # Auto-sync interval (or disable entirely)

# Legacy Support (deprecated, use role-based keys above)
API_KEY=change-me-legacy-key         # Provides admin access

# ====================================================
# Development/Local Configuration (for reference)
# ====================================================

# Database Configuration (Local)
DB_PATH=sidecar.db

# Vector Store Configuration (Local)  
INDEX_PATH=data/indexes/main.faiss
IDS_PATH=data/indexes/main.pkl

# OAuth Configuration (optional, for UI auth)
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
REDIRECT_URI=http://localhost:8088/auth/callback
SESSION_LIFETIME_HOURS=24

# Chat Model Configuration (Local development)
CHAT_MODEL=EleutherAI/gpt-j-6B
CHAT_MAX_CONTEXT=2048
CHAT_MAX_TOKENS=512
CHAT_TEMPERATURE=0.7
CHAT_USE_8BIT=true
CHAT_DEVICE=auto

# Fast LLM Configuration (llama-cpp-python)
CHAT_BACKEND=llama_cpp               # Use llama-cpp-python backend
CHAT_MODEL_PRESET=ultra_fast         # ultra_fast, fast, balanced, quality
CHAT_N_GPU_LAYERS=0                  # CPU only for stability
CHAT_N_THREADS=4
CHAT_N_BATCH=512
CHAT_USE_MLOCK=true

# Celery/Redis for Background Tasks
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# Security Settings
RATE_LIMIT_REQUESTS_PER_HOUR=1000    # Global rate limiting
ENABLE_AUDIT_LOG=true                # Enable authentication audit logging
DB_ENCRYPTION_KEY=your-32-byte-key   # For SQLCipher encryption (future)

# Development Settings
DEBUG=false
LOG_LEVEL=INFO